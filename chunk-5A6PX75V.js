import{d as de,g as ce,h as pe,i as ue}from"./chunk-HAKJTGPP.js";import{a as ne}from"./chunk-HJ65M3GT.js";import{a as te,c as ie}from"./chunk-PLUFTQLO.js";import"./chunk-AR3WG4EW.js";import{b as me,c as se,d as _e}from"./chunk-S46NWW24.js";import"./chunk-JJBMWG6C.js";import{c as q,e as v,g as H,h as J,k as K,l as Q,n as X,o as Y,q as Z,s as ee}from"./chunk-C2PEURRA.js";import{a as oe,b as ae,c as le,d as re}from"./chunk-OFUQICFS.js";import{d as W,e as A,f as U,n as $,p as j}from"./chunk-B3PSGKLK.js";import{$b as m,Bc as z,Cc as G,Hb as _,Ib as d,Jb as y,Lb as N,Mb as E,Nb as c,Ob as n,Pb as o,Qb as b,Rb as F,Sb as w,Ub as M,Zb as f,ab as V,cb as l,gc as L,ka as C,lc as r,mc as I,nc as p,ob as P,pc as R,qa as u,qc as B,ra as g,rc as O,sc as k,tc as h,ub as T,uc as x,zc as D}from"./chunk-WE3Z55MB.js";function ve(e,a){if(e&1&&b(0,"img",4),e&2){m(2);let t=x(0),i=x(1);c("alt",`banner from ${i} film`)("src",`https://image.tmdb.org/t/p/w500${t}`,V)}}function Ce(e,a){if(e&1&&b(0,"img",5),e&2){m(2);let t=x(1);c("alt",`No available banner from ${t} film`)}}function fe(e,a){if(e&1&&(n(0,"p"),r(1),D(2,"currency"),o()),e&2){let t=m(3);l(),p("Budget: ",z(2,1,t.movieDetails.budget,"USD"))}}function xe(e,a){e&1&&(n(0,"p"),r(1,"Budget: No available Budget"),o())}function be(e,a){if(e&1&&(n(0,"p"),r(1),D(2,"currency"),o()),e&2){let t=m(3);l(),p("Revenue: ",z(2,1,t.movieDetails.revenue,"USD"))}}function De(e,a){e&1&&(n(0,"p"),r(1,"Revenue: No available Revenue"),o())}function ze(e,a){if(e&1&&(n(0,"li"),r(1),o()),e&2){let t=a.$implicit;l(),I(t.english_name)}}function Me(e,a){e&1&&(n(0,"li"),r(1,"There's no available languages"),o())}function he(e,a){if(e&1&&(F(0),n(1,"nz-layout")(2,"nz-sider"),_(3,ve,1,2,"img",4)(4,Ce,1,1,"img",5),o(),n(5,"nz-layout")(6,"nz-content")(7,"p"),r(8),o(),_(9,fe,3,4,"p")(10,xe,2,0,"p"),n(11,"p"),r(12),D(13,"date"),o(),_(14,be,3,4,"p")(15,De,2,0,"p"),n(16,"p"),r(17),o(),n(18,"p"),r(19),o(),n(20,"ul"),r(21,"Spoken Languages: "),N(22,ze,2,1,"li",null,y,!1,Me,2,0,"li"),o()()()(),w()),e&2){m();let t=x(0),i=m();l(3),d(t!==null?3:4),l(5),p("Overview: ",i.movieDetails.overview),l(),d(i.movieDetails.budget?9:10),l(3),p("Release date: ",z(13,8,i.movieDetails.release_date,"shortDate")),l(2),d(i.movieDetails.revenue?14:15),l(3),p("Vote average: ",i.movieDetails.vote_average),l(2),p("Vote count: ",i.movieDetails.vote_count),l(3),E(i.movieDetails.spoken_languages)}}function Se(e,a){e&1&&(n(0,"p",9),r(1,"The input should be a value between 0 and 10"),o())}function Ve(e,a){if(e&1){let t=M();n(0,"form",6),f("ngSubmit",function(){u(t);let s=m(3);return g(s.sendRating())}),n(1,"label",7),r(2," Rate the movie: "),b(3,"input",8),_(4,Se,2,0,"p",9),o()(),n(5,"button",10),f("click",function(){u(t);let s=m(3);return g(s.handleCancel())}),r(6,"Close modal"),o(),n(7,"button",11),f("click",function(){u(t);let s=m(3);return g(s.sendRating())}),r(8,"Send Rating"),o()}if(e&2){let t=m(3);c("formGroup",t.rateForm),l(3),c("nzStatus",!t.rateForm.valid&&t.rateForm.touched?"error":""),l(),d(!t.rateForm.valid&&t.rateForm.touched?4:-1),l(3),c("disabled",!t.rateForm.valid)("nzLoading",t.isConfirmLoading)}}function Pe(e,a){e&1&&(n(0,"p"),r(1,"Submitted successfully"),o())}function Te(e,a){if(e&1&&_(0,Ve,9,5)(1,Pe,2,0,"p"),e&2){let t=m(2);d(t.submitted?1:0)}}function ye(e,a){if(e&1){let t=M();k(0)(1),n(2,"nz-modal",2),O("nzVisibleChange",function(s){u(t);let S=m();return B(S.isVisible,s)||(S.isVisible=s),g(s)}),f("nzOnCancel",function(){u(t);let s=m();return g(s.handleCancel())}),T(3,he,25,11,"ng-container",3)(4,Te,2,1,"ng-template",null,0,G),o()}if(e&2){let t=L(5),i=m();h(i.movieDetails.poster_path),l();let s=h(i.movieDetails.title);l(),R("nzVisible",i.isVisible),c("nzTitle",s)("nzFooter",t)}}var ge=class e{#e=C($);#i=C(j);#t=C(ne);isVisible=!0;movieDetails;movie_id;formBuilder=C(Z);rateForm=this.formBuilder.group({rateValue:["",[v.maxLength(2),v.min(0),v.max(10),v.pattern(/^[0-9]*$/),v.required]]});isConfirmLoading=!1;submitted=!1;ngOnInit(){this.movie_id=Number(this.#e.snapshot.paramMap.get("id")),this.#t.getMovieDetails(this.movie_id).subscribe({next:a=>{this.movieDetails=a}})}handleCancel(){this.isVisible=!1,this.#i.navigate(["../../"],{relativeTo:this.#e})}sendRating(){this.rateForm.valid&&(this.isConfirmLoading=!0,this.#t.addRating(this.movie_id,Number(this.rateForm.value.rateValue)).subscribe({next:()=>{this.isConfirmLoading=!1,this.submitted=!0}}))}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=P({type:e,selectors:[["app-movie-details-page"]],decls:1,vars:1,consts:[["modalFooter",""],[3,"nzVisible","nzTitle","nzFooter"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzFooter"],[4,"nzModalContent"],[1,"banner-details",3,"alt","src"],["src","/assets/No_image_available.png",1,"banner-details",3,"alt"],[3,"ngSubmit","formGroup"],["for","rateInput"],["id","rateInput","nz-input","","placeholder","e.g: 9","name","rate","type","number","formControlName","rateValue",3,"nzStatus"],[1,"error"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","disabled","nzLoading"]],template:function(t,i){t&1&&_(0,ye,6,5,"nz-modal",1),t&2&&d(i.movieDetails?0:-1)},dependencies:[_e,se,me,ue,pe,de,ce,U,A,W,ee,K,q,Q,H,J,X,Y,ie,te,re,le,oe,ae],styles:[".banner-details[_ngcontent-%COMP%]{max-height:300px}nz-content[_ngcontent-%COMP%]{padding:16px}.ant-layout-sider[_ngcontent-%COMP%]{background:none!important}form[_ngcontent-%COMP%]{text-align:left;margin-bottom:16px}"]})};export{ge as MovieDetailsPage};
